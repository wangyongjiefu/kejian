<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>&lt;31302DCDF8C2E7C4A3BFE9B7E2D7B02E70707478&gt;</title><meta name="author" content="lala"/><style type="text/css"> * {margin:0; padding:0; text-indent:0; }
 .s1 { color: #FFF; font-family:微软雅黑, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 46pt; }
 .s2 { color: #55C5FF; font-family:微软雅黑, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 14pt; }
 h1 { color: #FFF; font-family:微软雅黑, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 31.5pt; }
 p { color: #FFF; font-family:微软雅黑, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 15.5pt; margin:0pt; }
 .s3 { color: #FF0; font-family:宋体; font-style: normal; font-weight: normal; text-decoration: none; font-size: 14pt; }
 .s4 { color: #FFF; font-family:宋体; font-style: normal; font-weight: normal; text-decoration: none; font-size: 14pt; }
 .s5 { color: #FF0; font-family:Corbel, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 14pt; }
 .s6 { color: #FFF; font-family:Corbel, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 14pt; }
 .s7 { color: #FFF; font-family:宋体; font-style: normal; font-weight: normal; text-decoration: none; font-size: 12pt; }
 .s8 { color: #FFF; font-family:微软雅黑, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 14.5pt; }
 .s9 { color: #323232; font-family:"Segoe Print"; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10.5pt; }
 .s10 { color: #D6A8ED; font-family:Consolas, monospace; font-style: normal; font-weight: normal; text-decoration: none; font-size: 15.5pt; }
 .s11 { color: #FFF; font-family:微软雅黑, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 13pt; }
 .a, a { color: #FFF; font-family:微软雅黑, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 13pt; }
 .s12 { color: black; font-family:微软雅黑, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s13 { color: #FFF; font-family:微软雅黑, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 14pt; }
 li {display: block; }
 #l1 {padding-left: 0pt; }
 #l1> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l2 {padding-left: 0pt; }
 #l2> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l3 {padding-left: 0pt; }
 #l3> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l4 {padding-left: 0pt; }
 #l4> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l5 {padding-left: 0pt; }
 #l5> li>*:first-child:before {content: " "; color: #FFF; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; font-size: 14pt; }
 #l6 {padding-left: 0pt; }
 #l6> li>*:first-child:before {content: " "; color: #FFF; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; font-size: 14pt; }
 #l7 {padding-left: 0pt; }
 #l7> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l8 {padding-left: 0pt; }
 #l8> li>*:first-child:before {content: " "; color: #FFF; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; font-size: 14pt; }
 #l9 {padding-left: 0pt; }
 #l9> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l10 {padding-left: 0pt; }
 #l10> li>*:first-child:before {content: " "; color: #FFF; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; font-size: 14pt; }
 #l11 {padding-left: 0pt; }
 #l11> li>*:first-child:before {content: " "; color: #FFF; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; font-size: 14pt; }
 #l12 {padding-left: 0pt; }
 #l12> li>*:first-child:before {content: " "; color: #FF0; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; font-size: 14pt; }
 #l13 {padding-left: 0pt; }
 #l13> li>*:first-child:before {content: " "; color: #FFF; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; font-size: 14pt; }
 #l14 {padding-left: 0pt; }
 #l14> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l15 {padding-left: 0pt; }
 #l15> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l16 {padding-left: 0pt; }
 #l16> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 li {display: block; }
 #l17 {padding-left: 0pt; }
 #l17> li>*:first-child:before {content: "• "; color: #323232; font-family:"Segoe Print"; font-style: normal; font-weight: normal; text-decoration: none; font-size: 9.5pt; }
 #l18 {padding-left: 0pt; }
 #l18> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l19 {padding-left: 0pt; }
 #l19> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l20 {padding-left: 0pt; }
 #l20> li>*:first-child:before {content: " "; color: #FFF; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; font-size: 15.5pt; }
 #l21 {padding-left: 0pt; }
 #l21> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l22 {padding-left: 0pt; }
 #l22> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l23 {padding-left: 0pt; }
 #l23> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l24 {padding-left: 0pt; }
 #l24> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l25 {padding-left: 0pt; }
 #l25> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l26 {padding-left: 0pt; }
 #l26> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l27 {padding-left: 0pt; }
 #l27> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l28 {padding-left: 0pt; }
 #l28> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l29 {padding-left: 0pt; }
 #l29> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l30 {padding-left: 0pt; }
 #l30> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l31 {padding-left: 0pt; }
 #l31> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l32 {padding-left: 0pt; }
 #l32> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l33 {padding-left: 0pt; }
 #l33> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l34 {padding-left: 0pt; }
 #l34> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l35 {padding-left: 0pt; }
 #l35> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l36 {padding-left: 0pt; }
 #l36> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l37 {padding-left: 0pt; }
 #l37> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l38 {padding-left: 0pt; }
 #l38> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l39 {padding-left: 0pt; }
 #l39> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l40 {padding-left: 0pt; }
 #l40> li>*:first-child:before {content: " "; color: #55C5FF; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; font-size: 14pt; }
 #l41 {padding-left: 0pt; }
 #l41> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
</style></head><body><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s1" style="padding-left: 79pt;text-indent: 0pt;line-height: 78pt;text-align: left;">网络模块封装</p><p class="s2" style="padding-top: 11pt;padding-left: 79pt;text-indent: 0pt;line-height: 26pt;text-align: left;">王红元</p><p class="s2" style="padding-left: 79pt;text-indent: 0pt;text-align: left;"><span>微博: coder why<br/>微信: 372623326</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="1123" height="632" alt="image" src="index_files/Image_001.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="padding-left: 84pt;text-indent: 0pt;line-height: 55pt;text-align: left;">主要内容</h1><ul id="l1"><li><p style="padding-top: 26pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">常见的网络请求模块，以及优缺点对比。</p></li><li><p style="padding-top: 5pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">JSONP的原理和封装</p><ul id="l2"><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">JSONP原理回顾</p></li><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">JSONP请求封装</p></li></ul></li><li><p style="padding-top: 5pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">axios的内容详解</p><ul id="l3"><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">认识axios网络模块</p></li><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">发送基本请求</p></li><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">axios创建实例</p></li><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">axios拦截器的使用</p><p style="text-indent: 0pt;text-align: left;"><span><img width="1122" height="631" alt="image" src="index_files/Image_002.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="padding-left: 84pt;text-indent: 0pt;line-height: 55pt;text-align: left;">选择什么网络模块?</h1><ul id="l4"><li><p class="s3" style="padding-top: 7pt;padding-left: 25pt;text-indent: -19pt;text-align: left;">选择三: <span style=" color: #FFF;">官方在Vue1.x的时候, 推出了Vue-resource.</span></p><ul id="l5"><li><p class="s4" style="padding-top: 5pt;padding-left: 57pt;text-indent: -19pt;text-align: left;">Vue-resource的体积相对于jQuery小很多.</p></li><li><p class="s4" style="padding-top: 5pt;padding-left: 57pt;text-indent: -19pt;text-align: left;">另外Vue-resource是官方推出的.</p></li></ul></li><li><p class="s4" style="padding-top: 5pt;padding-left: 25pt;text-indent: -19pt;text-align: left;">为什么不选择它呢?</p><ul id="l6"><li><p class="s4" style="padding-top: 5pt;padding-left: 57pt;text-indent: -19pt;line-height: 132%;text-align: left;"><span>在Vue2.0退出后, Vue作者就在GitHub的Issues中说明了<br/> 去掉vue-resource, 并且以后也不会再更新.</span></p></li><li><p class="s4" style="padding-left: 57pt;text-indent: -19pt;line-height: 132%;text-align: left;"><span>那么意味着以后vue-reource不再支持新的版本时, 也不<br/> 会再继续更新和维护.</span></p></li><li><p class="s4" style="padding-left: 57pt;text-indent: -19pt;text-align: left;">对以后的项目开发和维护都存在很大的隐患.</p></li></ul></li></ul><p style="text-indent: 0pt;text-align: left;"/><ul id="l7"><li><p class="s3" style="padding-top: 6pt;padding-left: 25pt;text-indent: -19pt;text-align: left;">选择一: <span style=" color: #FFF;">传统的Ajax是基于XMLHttpRequest(XHR)</span></p></li><li><p class="s4" style="padding-top: 4pt;padding-left: 25pt;text-indent: -19pt;text-align: left;">为什么不用它呢?</p><ul id="l8"><li><p class="s4" style="padding-top: 3pt;padding-left: 57pt;text-indent: -19pt;text-align: left;">非常好解释, 配置和调用方式等非常混乱.</p></li><li><p class="s4" style="padding-top: 4pt;padding-left: 57pt;text-indent: -19pt;text-align: left;">编码起来看起来就非常蛋疼.</p></li><li><p class="s4" style="padding-top: 4pt;padding-left: 57pt;text-indent: -19pt;text-align: left;">所以真实开发中很少直接使用, 而是使用jQuery-Ajax</p></li></ul></li></ul><p style="text-indent: 0pt;text-align: left;"/></li></ul></li><li><p style="padding-top: 26pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">Vue中发送网络请求有非常多的方式, 那么, 在开发中, 如何选择呢?</p><p style="text-indent: 0pt;text-align: left;"><br/></p><ul id="l9"><li><p class="s4" style="padding-top: 6pt;padding-left: 25pt;text-indent: -19pt;text-align: left;"><span style=" color: #FF0;">选择二</span><span class="s5">: </span>在前面的学习中<span class="s6">, </span>我们经常会使用<span class="s6">jQuery-Ajax</span></p><ul id="l10"><li><p class="s4" style="padding-top: 4pt;padding-left: 57pt;text-indent: -19pt;text-align: left;">相对于传统的<span class="s6">Ajax</span>非常好用<span class="s6">.</span></p></li></ul></li><li><p class="s4" style="padding-top: 4pt;padding-left: 25pt;text-indent: -19pt;text-align: left;">为什么不选择它呢<span class="s6">?</span></p><ul id="l11"><li><p class="s4" style="padding-top: 3pt;padding-left: 57pt;text-indent: -19pt;line-height: 122%;text-align: left;">首先<span class="s6">, </span>我们先明确一点<span class="s6">: </span>在<span class="s6">Vue</span><span>的整个开发中都是不需要<br/> 使用</span><span class="s6">jQuery</span>了<span class="s6">.</span></p></li><li><p class="s4" style="padding-left: 57pt;text-indent: -19pt;line-height: 122%;text-align: left;">那么<span class="s6">, </span>就意味着为了方便我们进行一个网络请求<span class="s6">, </span><span>特意引<br/> 用一个</span><span class="s6">jQuery, </span>你觉得合理吗<span class="s6">?</span></p></li><li><p class="s6" style="padding-left: 57pt;text-indent: -19pt;text-align: left;">jQuery<span class="s4">的代码</span>1w+<span class="s4">行</span>.</p></li><li><p class="s6" style="padding-top: 3pt;padding-left: 57pt;text-indent: -19pt;text-align: left;">Vue<span class="s4">的代码才</span>1w+<span class="s4">行</span>.</p></li><li><p class="s4" style="padding-top: 4pt;padding-left: 57pt;text-indent: -19pt;text-align: left;">完全没有必要为了用网络请求就引用这个重量级的框架<span class="s6">.</span></p></li></ul></li></ul><ul id="l12"><li><p class="s4" style="padding-top: 7pt;padding-left: 25pt;text-indent: -19pt;line-height: 132%;text-align: left;"><span style=" color: #FF0;">选择四: </span>在说明不再继续更新和维护<span class="s6">vue-resource</span>的同时<span class="s6">, </span><span>作者<br/> 还推荐了一个框架</span><span class="s6">: axios</span><span class="s7">为什么不用它呢?</span></p><ul id="l13"><li><p class="s4" style="padding-left: 57pt;text-indent: -19pt;text-align: left;">axios有非常多的优点, 并且用起来也非常方便.</p></li><li><p class="s4" style="padding-top: 5pt;padding-left: 57pt;text-indent: -19pt;text-align: left;">稍后, 我们对他详细学习.</p></li></ul></li></ul><p style="padding-left: 14pt;text-indent: 0pt;text-align: left;"><span style=" color: black; font-family:&quot;Times New Roman&quot;, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt;"> </span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="1122" height="631" alt="image" src="index_files/Image_003.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="padding-left: 84pt;text-indent: 0pt;line-height: 55pt;text-align: left;">jsonp</h1><p style="text-indent: 0pt;text-align: left;"><span><img width="418" height="515" alt="image" src="index_files/Image_004.jpg"/></span></p></li><li><p class="s8" style="padding-top: 24pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">在前端开发中, 我们一种常见的网络请求方式就是JSONP</p><ul id="l14"><li><p class="s8" style="padding-top: 3pt;padding-left: 60pt;text-indent: -21pt;text-align: justify;">使用JSONP最主要的原因往往是为了解决跨域访问的问题.</p></li></ul></li><li><p class="s8" style="padding-top: 3pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">JSONP的原理是什么呢?</p><ul id="l15"><li><p class="s8" style="padding-top: 3pt;padding-left: 60pt;text-indent: -21pt;text-align: justify;">JSONP的核心在于通过&lt;script&gt;标签的src来帮助我们请求数据.</p></li><li><p class="s8" style="padding-top: 4pt;padding-left: 60pt;text-indent: -21pt;line-height: 94%;text-align: justify;"><span>原因是我们的项目部署在domain1.com服务器上时, 是不能直接访<br/>问domain2.com服务器上的资料的.</span></p></li><li><p class="s8" style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;line-height: 94%;text-align: justify;"><span>这个时候, 我们利用&lt;script&gt;标签的src帮助我们去服务器请求到数<br/>据, 将数据当做一个javascript的函数来执行, 并且执行的过程中传<br/>入我们需要的json.</span></p></li><li><p class="s8" style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;line-height: 93%;text-align: justify;"><span>所以, 封装jsonp的核心就在于我们监听window上的jsonp进行回<br/>调时的名称.</span></p></li></ul></li><li><p class="s8" style="padding-top: 4pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">JSONP如何封装呢?</p><ul id="l16"><li><p class="s8" style="padding-top: 3pt;padding-left: 60pt;text-indent: -21pt;text-align: justify;">我们一起自己来封装一个处理JSONP的代码吧.</p></li></ul></li></ul><p style="text-indent: 0pt;text-align: left;"><span><img width="1122" height="631" alt="image" src="index_files/Image_005.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="589" height="509" alt="image" src="index_files/Image_006.jpg"/></span><span><img width="524" height="157" alt="image" src="index_files/Image_007.jpg"/></span></p><h1 style="padding-left: 84pt;text-indent: 0pt;line-height: 55pt;text-align: left;">JSONP封装</h1><p style="text-indent: 0pt;text-align: left;"><span><img width="1122" height="631" alt="image" src="index_files/Image_008.png"/></span></p><ul id="l17"><li><p class="s9" style="padding-top: 3pt;padding-left: 4pt;text-indent: -4pt;line-height: 13pt;text-align: left;">axios: ajax i/o system.</p><h1 style="padding-left: 84pt;text-indent: 0pt;line-height: 52pt;text-align: left;">为什么选择axios?</h1><ul id="l18"><li><p style="padding-top: 24pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">为什么选择axios? 作者推荐和功能特点</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 27pt;text-indent: 0pt;text-align: left;"><span><img width="535" height="145" alt="image" src="index_files/Image_009.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-top: 1pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">功能特点:</p><ul id="l19"><li><p style="padding-top: 3pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">在浏览器中发送 XMLHttpRequests 请求</p></li><li><p style="padding-top: 3pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">在 node.js 中发送 http请求</p></li><li><p style="padding-top: 3pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">支持 Promise API</p></li><li><p style="padding-top: 3pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">拦截请求和响应</p></li><li><p style="padding-top: 3pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">转换请求和响应数据</p></li><li><p style="padding-top: 3pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">等等</p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ul></li><li><p style="padding-left: 37pt;text-indent: -19pt;line-height: 29pt;text-align: left;">补充: axios名称的由来? 个人理解</p><ul id="l20"><li><p style="padding-left: 68pt;text-indent: -19pt;line-height: 28pt;text-align: left;">没有具体的翻译.</p></li><li><p style="padding-left: 68pt;text-indent: -19pt;line-height: 29pt;text-align: left;">axios: ajax i/o system.</p></li></ul><p style="text-indent: 0pt;text-align: left;"><span><img width="1122" height="631" alt="image" src="index_files/Image_010.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="padding-left: 84pt;text-indent: 0pt;line-height: 55pt;text-align: left;">axiox请求方式</h1></li><li><p style="padding-top: 26pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">支持多种请求方式:</p><ul id="l21"><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">axios(config)</p></li><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">axios.request(config)</p></li><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">axios.get(url[, config])</p></li><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">axios.delete(url[, config])</p></li><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">axios.head(url[, config])</p></li><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">axios.post(url[, data[, config]])</p></li><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">axios.put(url[, data[, config]])</p></li><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">axios.patch(url[, data[, config]])</p></li></ul></li><li><p style="padding-top: 5pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">如何发送请求呢?</p><ul id="l22"><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">我们看一下左边的案例</p><p style="text-indent: 0pt;text-align: left;"><span><img width="1122" height="631" alt="image" src="index_files/Image_011.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="padding-left: 84pt;text-indent: 0pt;line-height: 55pt;text-align: left;">发送get请求演示</h1><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 18pt;text-indent: 0pt;text-align: left;"><span><img width="503" height="498" alt="image" src="index_files/Image_012.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="1122" height="631" alt="image" src="index_files/Image_013.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="padding-left: 84pt;text-indent: 0pt;line-height: 55pt;text-align: left;">发送并发请求</h1></li></ul></li><li><p style="padding-top: 26pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">有时候, 我们可能需求同时发送两个请求</p><ul id="l23"><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">使用axios.all, 可以放入多个请求的数组.</p></li><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">axios.all([]) 返回的结果是一个数组，使用 axios.spread 可将数组 [res1,res2] 展开为 res1, res2</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 31pt;text-indent: 0pt;text-align: left;"><span><img width="682" height="322" alt="image" src="index_files/Image_014.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="1122" height="631" alt="image" src="index_files/Image_015.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="padding-left: 84pt;text-indent: 0pt;line-height: 55pt;text-align: left;">全局配置</h1></li></ul></li><li><p style="padding-top: 26pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">在上面的示例中, 我们的BaseURL是固定的</p><ul id="l24"><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">事实上, 在开发中可能很多参数都是固定的.</p></li><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">这个时候我们可以进行一些抽取, 也可以利用axiox的全局配置</p><p class="s10" style="padding-top: 6pt;padding-left: 39pt;text-indent: 0pt;text-align: left;">axios.defaults.baseURL = ‘123.207.32.32:8000’</p><p class="s10" style="padding-left: 39pt;text-indent: 0pt;text-align: left;">axios.defaults.headers.post[‘Content-Type’] = ‘application/x-www-form-urlencoded’;</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 39pt;text-indent: 0pt;text-align: left;"><span><img width="588" height="277" alt="image" src="index_files/Image_016.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="1122" height="631" alt="image" src="index_files/Image_017.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="padding-left: 84pt;text-indent: 0pt;line-height: 55pt;text-align: left;">常见的配置选项</h1><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ul></li><li><p class="s11" style="padding-top: 6pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">请求地址</p><ul id="l25"><li><p class="s11" style="padding-top: 3pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">url: &#39;/user&#39;,</p></li></ul></li><li><p class="s11" style="padding-top: 3pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">请求类型</p><ul id="l26"><li><p class="s11" style="padding-top: 3pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">method: &#39;get&#39;,</p></li></ul></li><li><p class="s11" style="padding-top: 3pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">请根路径</p><ul id="l27"><li><p style="padding-top: 3pt;padding-left: 60pt;text-indent: -21pt;text-align: left;"><a href="http://www.mt.com/api%27" class="a" target="_blank">baseURL: &#39;</a><a href="http://www.mt.com/api%27" target="_blank">http://www.mt.com/api&#39;,</a></p></li></ul></li><li><p class="s11" style="padding-top: 3pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">请求前的数据处理</p><ul id="l28"><li><p class="s11" style="padding-top: 3pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">transformRequest:[function(data){}],</p></li></ul></li><li><p class="s11" style="padding-top: 3pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">请求后的数据处理</p><ul id="l29"><li><p class="s11" style="padding-top: 3pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">transformResponse: [function(data){}],</p></li></ul></li><li><p class="s11" style="padding-top: 3pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">自定义的请求头</p><ul id="l30"><li><p class="s11" style="padding-top: 3pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">headers:{&#39;x-Requested-With&#39;:&#39;XMLHttpRequest&#39;},</p></li></ul></li><li><p class="s11" style="padding-top: 3pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">URL查询对象</p><ul id="l31"><li><p class="s11" style="padding-top: 3pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">params:{ id: 12 },</p></li></ul></li><li><p class="s11" style="padding-top: 1pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">查询对象序列化函数</p><ul id="l32"><li><p class="s11" style="padding-top: 1pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">paramsSerializer: function(params){ }</p></li></ul></li><li><p class="s11" style="padding-top: 1pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">request body</p><ul id="l33"><li><p class="s11" style="padding-top: 1pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">data: { key: &#39;aa&#39;},</p></li></ul></li><li><p class="s11" style="padding-top: 1pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">超时设置s</p><ul id="l34"><li><p class="s11" style="padding-top: 1pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">timeout: 1000,</p></li></ul></li><li><p class="s11" style="padding-top: 1pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">跨域是否带Token</p><ul id="l35"><li><p class="s11" style="padding-top: 1pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">withCredentials: false,</p></li></ul></li><li><p class="s11" style="padding-top: 1pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">自定义请求处理</p><ul id="l36"><li><p class="s11" style="padding-top: 1pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">adapter: function(resolve, reject, config){},</p></li></ul></li><li><p class="s11" style="padding-top: 1pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">身份验证信息</p><ul id="l37"><li><p class="s11" style="padding-top: 1pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">auth: { uname: &#39;&#39;, pwd: &#39;12&#39;},</p></li></ul></li><li><p class="s11" style="padding-top: 1pt;padding-left: 35pt;text-indent: -18pt;line-height: 22pt;text-align: left;">响应的数据格式 json / blob /document /arraybuffer / text</p><p class="s11" style="padding-left: 35pt;text-indent: 0pt;line-height: 22pt;text-align: left;">/ stream</p><ul id="l38"><li><p class="s11" style="padding-top: 1pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">responseType: &#39;json&#39;,</p><p style="text-indent: 0pt;text-align: left;"><span><img width="1122" height="631" alt="image" src="index_files/Image_018.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="padding-left: 84pt;text-indent: 0pt;line-height: 55pt;text-align: left;">axios的实例</h1></li></ul></li><li><p style="padding-top: 26pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">为什么要创建axios的实例呢?</p><ul id="l39"><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">当我们从axios模块中导入对象时, 使用的实例是默认的实例.</p></li><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">当给该实例设置一些默认配置时, 这些配置就被固定下来了.</p></li><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">但是后续开发中, 某些配置可能会不太一样.</p></li><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">比如某些请求需要使用特定的baseURL或者timeout或者content-Type等.</p></li><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">这个时候, 我们就可以创建新的实例, 并且传入属于该实例的配置信息.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 33pt;text-indent: 0pt;text-align: left;"><span><img width="618" height="196" alt="image" src="index_files/Image_019.jpg"/></span>	<span><img width="383" height="197" alt="image" src="index_files/Image_020.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="1122" height="631" alt="image" src="index_files/Image_021.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="padding-left: 84pt;text-indent: 0pt;line-height: 55pt;text-align: left;">axios封装</h1><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 39pt;text-indent: 0pt;text-align: left;"><span><img width="593" height="507" alt="image" src="index_files/Image_022.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="1122" height="631" alt="image" src="index_files/Image_023.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="padding-left: 84pt;text-indent: 0pt;line-height: 55pt;text-align: left;">如何使用拦截器？</h1></li></ul></li><li><p style="padding-top: 26pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">axios提供了拦截器，用于我们在发送每次请求或者得到相应后，进行对应的处理。</p><p style="text-indent: 0pt;text-align: left;"><span><img width="564" height="380" alt="image" src="index_files/Image_024.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="374" height="277" alt="image" src="index_files/Image_025.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="514" height="60" alt="image" src="index_files/Image_026.jpg"/></span></p></li><li><p style="padding-top: 5pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">如何使用拦截器呢？</p><p style="text-indent: 0pt;text-align: left;"><span><img width="1122" height="631" alt="image" src="index_files/Image_027.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="padding-left: 84pt;text-indent: 0pt;line-height: 55pt;text-align: left;">拦截器中都做什么呢？</h1></li><li><p style="padding-top: 26pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">请求拦截可以做到的事情：</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 25pt;text-indent: 0pt;text-align: left;"><span><img width="921" height="320" alt="image" src="index_files/Image_028.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 35pt;text-indent: -18pt;text-align: left;">请求拦截中错误拦截较少，通常都是配置相关的拦截</p><ul id="l40"><li><p class="s13" style="padding-top: 4pt;padding-left: 54pt;text-indent: -18pt;text-align: left;">可能的错误比如请求超时，可以将页面跳转到一个错误页面中。</p></li></ul><p style="text-indent: 0pt;text-align: left;"><span><img width="1122" height="631" alt="image" src="index_files/Image_029.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><h1 style="padding-left: 84pt;text-indent: 0pt;line-height: 55pt;text-align: left;">拦截器中都做什么呢？</h1></li><li><p style="padding-top: 26pt;padding-left: 35pt;text-indent: -18pt;text-align: left;">响应拦截中完成的事情：</p><ul id="l41"><li><p style="padding-top: 5pt;padding-left: 60pt;text-indent: -21pt;text-align: left;">响应的成功拦截中，主要是对数据进行过滤。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s12" style="padding-left: 27pt;text-indent: 0pt;text-align: left;"><span><img width="647" height="95" alt="image" src="index_files/Image_030.jpg"/></span>	<span><img width="411" height="54" alt="image" src="index_files/Image_031.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p style="padding-left: 60pt;text-indent: -21pt;text-align: left;">响应的失败拦截中，可以根据status判断报错的错误码，跳转到不同的错误提示页面。</p></li></ul></li></ul></li></ul><p style="padding-left: 45pt;text-indent: 0pt;text-align: left;"><span><img width="405" height="229" alt="image" src="index_files/Image_032.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="1122" height="631" alt="image" src="index_files/Image_033.png"/></span></p></body></html>
