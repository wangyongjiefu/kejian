<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>&lt;30352DC7B0B6CBC4A3BFE9BBAF2E70707478&gt;</title><meta name="author" content="lala"/><style type="text/css"> * {margin:0; padding:0; text-indent:0; }
 h1 { color: black; font-family:微软雅黑, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 57pt; }
 .s1 { color: #585858; font-family:微软雅黑, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 15.5pt; }
 .a, a { color: black; font-family:微软雅黑, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 14pt; }
 .s3 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .h2 { color: #3F3F3F; font-family:微软雅黑, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 31.5pt; }
 p { color: #585858; font-family:微软雅黑, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 14pt; margin:0pt; }
 .s4 { color: black; font-family:宋体; font-style: normal; font-weight: normal; text-decoration: none; font-size: 14pt; }
 .s5 { color: black; font-family:Calibri, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 14pt; }
 h3 { color: #585858; font-family:微软雅黑, sans-serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 15.5pt; }
 .s6 { color: black; font-family:微软雅黑, sans-serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; vertical-align: 1pt; }
 li {display: block; }
 #l1 {padding-left: 0pt; }
 #l1> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l2 {padding-left: 0pt; }
 #l2> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l3 {padding-left: 0pt; }
 #l3> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l4 {padding-left: 0pt; }
 #l4> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; font-size: 14pt; }
 #l5 {padding-left: 0pt; }
 #l5> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l6 {padding-left: 0pt; }
 #l6> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l7 {padding-left: 0pt; }
 #l7> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l8 {padding-left: 0pt; }
 #l8> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l9 {padding-left: 0pt; }
 #l9> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l10 {padding-left: 0pt; }
 #l10> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l11 {padding-left: 0pt; }
 #l11> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l12 {padding-left: 0pt; }
 #l12> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l13 {padding-left: 0pt; }
 #l13> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l14 {padding-left: 0pt; }
 #l14> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l15 {padding-left: 0pt; }
 #l15> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
 #l16 {padding-left: 0pt; }
 #l16> li>*:first-child:before {content: " "; color: black; font-family:Wingdings; font-style: normal; font-weight: normal; text-decoration: none; }
</style></head><body><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="1117" height="22" alt="image" src="index_files/Image_001.png"/></span></p><h1 style="padding-left: 277pt;text-indent: 0pt;line-height: 95pt;text-align: center;">模块化开发</h1><p class="s1" style="padding-top: 17pt;padding-left: 277pt;text-indent: 0pt;line-height: 27pt;text-align: center;">王红元</p><p class="s1" style="padding-left: 359pt;text-indent: -9pt;line-height: 90%;text-align: center;"><span>微博：coderwhy<br/>微信：372623326</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 368pt;text-indent: 0pt;text-align: left;"><span><img width="140" height="50" alt="image" src="index_files/Image_002.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="1117" height="22" alt="image" src="index_files/Image_003.png"/></span></p><p style="padding-left: 277pt;text-indent: 0pt;text-align: center;"><a href="http://www.520it.com/" class="a" target="_blank">实力IT教育 </a><a href="http://www.520it.com/" target="_blank">www.520it.com</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="1119" height="7" alt="image" src="index_files/Image_004.png"/></span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s3" style="padding-left: 13pt;text-indent: 0pt;line-height: 55pt;text-align: left;"><span><img width="141" height="50" alt="image" src="index_files/Image_005.jpg"/></span>        <span class="h2">JavaScript原始功能</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="408" height="87" alt="image" src="index_files/Image_006.jpg"/></span></p><ul id="l1"><li><p style="padding-top: 4pt;padding-left: 33pt;text-indent: -15pt;line-height: 85%;text-align: left;"><span>在网页开发的早期，js制作作为一种脚本语言，做一些简单的表单验证或动画<br/>实现等，那个时候代码还是很少的。</span></p><ul id="l2"><li><p style="padding-top: 1pt;padding-left: 64pt;text-indent: -15pt;text-align: left;">那个时候的代码是怎么写的呢？直接将代码写在&lt;script&gt;标签中即可</p><p style="text-indent: 0pt;text-align: left;"><span><img width="408" height="163" alt="image" src="index_files/Image_007.jpg"/></span></p></li></ul></li><li><p style="padding-top: 4pt;padding-left: 33pt;text-indent: -15pt;text-align: left;">随着ajax异步请求的出现，慢慢形成了前后端的分离</p><ul id="l3"><li><p style="padding-left: 64pt;text-indent: -15pt;text-align: left;">客户端需要完成的事情越来越多，代码量也是与日俱增。</p></li><li><p style="padding-top: 3pt;padding-left: 64pt;text-indent: -15pt;line-height: 85%;text-align: left;"><span>为了应对代码量的剧增，我们通常会将代码组织在多个js文件中，进行维<br/>护。</span></p></li><li><p style="padding-top: 1pt;padding-left: 64pt;text-indent: -15pt;text-align: left;">但是这种维护方式，依然不能避免一些灾难性的问题。</p><ul id="l4"><li><p class="s4" style="padding-top: 8pt;padding-left: 25pt;text-indent: -19pt;line-height: 141%;text-align: left;"><span>小明后来发现代码不能正常运行，去检<br/>查自己的变量，发现确实</span><span class="s5">true</span></p></li><li><p class="s4" style="padding-left: 25pt;text-indent: -19pt;line-height: 140%;text-align: left;">最后杯具发生了，小明加班到<span class="s5">2</span><span>点还是没<br/>有找到问题出在哪里</span><span class="s5">(</span>所以，某些加班真</p></li></ul><p class="s4" style="padding-left: 25pt;text-indent: 0pt;text-align: left;">的是无意义的<span class="s5">)</span></p><p style="text-indent: 0pt;text-align: left;"/></li></ul></li><li><p style="padding-top: 4pt;padding-left: 33pt;text-indent: -15pt;text-align: left;">比如全局变量同名问题：看右边的例子</p></li><li><p style="padding-top: 4pt;padding-left: 33pt;text-indent: -15pt;text-align: left;">另外，这种代码的编写方式对js文件的依赖顺序几乎是强制性的</p><ul id="l5"><li><p style="padding-top: 3pt;padding-left: 64pt;text-indent: -15pt;line-height: 85%;text-align: left;"><span>但是当js文件过多，比如有几十个的时候，弄清楚它们的顺序是一件比较<br/>同时的事情。</span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="1119" height="6" alt="image" src="index_files/Image_008.png"/></span></p></li><li><p style="padding-top: 1pt;padding-left: 64pt;text-indent: -15pt;text-align: left;">而且即使你弄清楚顺序了，也不能避免上面出现的这种尴尬问题的发生。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="1119" height="7" alt="image" src="index_files/Image_009.png"/></span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s3" style="padding-left: 13pt;text-indent: 0pt;line-height: 55pt;text-align: left;"><span><img width="141" height="50" alt="image" src="index_files/Image_010.jpg"/></span>        <span class="h2">匿名函数的解决方案</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ul></li><li><p class="s1" style="padding-top: 1pt;padding-left: 33pt;text-indent: -15pt;line-height: 27pt;text-align: left;">我们可以使用匿名函数来解决方面的重名问题</p><ul id="l6"><li><p class="s1" style="padding-left: 64pt;text-indent: -15pt;line-height: 27pt;text-align: left;">在aaa.js文件中，我们使用匿名函数</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 48pt;text-indent: 0pt;text-align: left;"><span><img width="412" height="74" alt="image" src="index_files/Image_011.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ul></li><li><p class="s1" style="padding-left: 33pt;text-indent: -15pt;line-height: 27pt;text-align: left;">但是如果我们希望在main.js文件中，用到flag，应该如何处理呢？</p><p style="text-indent: 0pt;text-align: left;"><span><img width="1119" height="6" alt="image" src="index_files/Image_012.png"/></span></p><ul id="l7"><li><p class="s1" style="padding-left: 64pt;text-indent: -15pt;line-height: 27pt;text-align: left;">显然，另外一个文件中不容易使用，因为flag是一个局部变量。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="1119" height="7" alt="image" src="index_files/Image_013.png"/></span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s3" style="padding-left: 13pt;text-indent: 0pt;line-height: 55pt;text-align: left;"><span><img width="141" height="50" alt="image" src="index_files/Image_014.jpg"/></span>        <span class="h2">使用模块作为出口</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="313" height="211" alt="image" src="index_files/Image_015.jpg"/></span></p></li></ul></li><li><p style="padding-top: 1pt;padding-left: 33pt;text-indent: -15pt;text-align: left;">我们可以使用将需要暴露到外面的变量，使用一个模块作为出口，什么意思呢？</p></li><li><p style="padding-top: 4pt;padding-left: 33pt;text-indent: -15pt;text-align: left;">来看下对应的代码：</p></li><li><p style="padding-top: 4pt;padding-left: 33pt;text-indent: -15pt;text-align: left;">我们做了什么事情呢？</p><ul id="l8"><li><p style="padding-left: 64pt;text-indent: -15pt;text-align: left;">非常简单，在匿名函数内部，定义一个对象。</p></li><li><p style="padding-left: 64pt;text-indent: -15pt;text-align: left;">给对象添加各种需要暴露到外面的属性和方法(不需要暴露的直接定义即可)。</p></li><li><p style="padding-left: 64pt;text-indent: -15pt;text-align: left;">最后将这个对象返回，并且在外面使用了一个MoudleA接受。</p><p style="text-indent: 0pt;text-align: left;"><span><img width="312" height="155" alt="image" src="index_files/Image_016.jpg"/></span></p></li></ul></li><li><p style="padding-top: 4pt;padding-left: 33pt;text-indent: -15pt;text-align: left;">接下来，我们在man.js中怎么使用呢？</p><ul id="l9"><li><p style="padding-left: 64pt;text-indent: -15pt;text-align: left;">我们只需要使用属于自己模块的属性和方法即可</p></li></ul></li><li><p style="padding-top: 4pt;padding-left: 33pt;text-indent: -15pt;text-align: left;">这就是模块最基础的封装，事实上模块的封装还有很多高级的话题：</p><ul id="l10"><li><p style="padding-left: 64pt;text-indent: -15pt;text-align: left;">但是我们这里就是要认识一下为什么需要模块，以及模块的原始雏形。</p></li><li><p style="padding-left: 64pt;text-indent: -15pt;text-align: left;">幸运的是，前端模块化开发已经有了很多既有的规范，以及对应的实现方案。</p></li></ul></li><li><p style="padding-top: 4pt;padding-left: 33pt;text-indent: -15pt;text-align: left;">常见的模块化规范：</p><p style="text-indent: 0pt;text-align: left;"><span><img width="1119" height="6" alt="image" src="index_files/Image_017.png"/></span></p><ul id="l11"><li><p style="padding-left: 64pt;text-indent: -15pt;text-align: left;">CommonJS、AMD、CMD，也有ES6的Modules</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="1119" height="7" alt="image" src="index_files/Image_018.png"/></span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s3" style="padding-left: 13pt;text-indent: 0pt;line-height: 55pt;text-align: left;"><span><img width="141" height="50" alt="image" src="index_files/Image_019.jpg"/></span>        <span class="h2">CommonJS（了解）</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ul></li><li><p class="s1" style="padding-top: 1pt;padding-left: 33pt;text-indent: -15pt;text-align: left;">模块化有两个核心：导出和导入</p></li><li><p class="s1" style="padding-top: 2pt;padding-left: 33pt;text-indent: -15pt;text-align: left;">CommonJS的导出：</p><p style="padding-left: 36pt;text-indent: 0pt;text-align: left;"><span><img width="325" height="163" alt="image" src="index_files/Image_020.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="1119" height="6" alt="image" src="index_files/Image_021.png"/></span></p></li><li><p class="s1" style="padding-top: 2pt;padding-bottom: 4pt;padding-left: 33pt;text-indent: -15pt;text-align: left;">CommonJS的导入</p><p style="padding-left: 30pt;text-indent: 0pt;text-align: left;"><span><img width="381" height="150" alt="image" src="index_files/Image_022.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="1119" height="7" alt="image" src="index_files/Image_023.png"/></span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s3" style="padding-left: 13pt;text-indent: 0pt;line-height: 55pt;text-align: left;"><span><img width="141" height="50" alt="image" src="index_files/Image_024.jpg"/></span>        <span class="h2">export基本使用</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><h3 style="padding-top: 1pt;padding-left: 33pt;text-indent: -15pt;text-align: left;">export<span class="s1">指令用于导出变量，比如下面的代码：</span></h3><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="285" height="85" alt="image" src="index_files/Image_025.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><span><img width="1119" height="6" alt="image" src="index_files/Image_026.png"/></span></p></li><li><p class="s1" style="padding-bottom: 2pt;padding-left: 33pt;text-indent: -15pt;text-align: left;">上面的代码还有另外一种写法：</p><p style="padding-left: 24pt;text-indent: 0pt;text-align: left;"><span><img width="301" height="123" alt="image" src="index_files/Image_027.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="1119" height="7" alt="image" src="index_files/Image_028.png"/></span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s3" style="padding-left: 13pt;text-indent: 0pt;line-height: 55pt;text-align: left;"><span><img width="141" height="50" alt="image" src="index_files/Image_029.jpg"/></span>        <span class="h2">导出函数或类</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li><li><p class="s1" style="padding-top: 1pt;padding-left: 33pt;text-indent: -15pt;line-height: 27pt;text-align: left;">上面我们主要是输出变量，也可以输出函数或者输出类</p><p style="text-indent: 0pt;text-align: left;"><span><img width="1119" height="6" alt="image" src="index_files/Image_030.png"/></span></p><ul id="l12"><li><p class="s1" style="padding-left: 64pt;text-indent: -15pt;line-height: 27pt;text-align: left;">上面的代码也可以写成这种形式：</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s6" style="padding-left: 35pt;text-indent: 0pt;text-align: left;"><span><img width="488" height="368" alt="image" src="index_files/Image_031.jpg"/></span>	<span><img width="501" height="368" alt="image" src="index_files/Image_032.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="1119" height="7" alt="image" src="index_files/Image_033.png"/></span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s3" style="padding-left: 13pt;text-indent: 0pt;line-height: 55pt;text-align: left;"><span><img width="141" height="50" alt="image" src="index_files/Image_034.jpg"/></span>        <span class="h2">export default</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ul></li><li><p class="s1" style="padding-top: 1pt;padding-left: 33pt;text-indent: -15pt;line-height: 27pt;text-align: left;">某些情况下，一个模块中包含某个的功能，我们并不希望给这个功能命名，而且让导入者可以自己来命名</p><ul id="l13"><li><p class="s1" style="padding-left: 64pt;text-indent: -15pt;line-height: 27pt;text-align: left;">这个时候就可以使用export default</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 52pt;text-indent: 0pt;text-align: left;"><span><img width="337" height="96" alt="image" src="index_files/Image_035.jpg"/></span></p></li></ul></li><li><p class="s1" style="padding-top: 16pt;padding-left: 33pt;text-indent: -15pt;line-height: 27pt;text-align: left;">我们来到main.js中，这样使用就可以了</p><ul id="l14"><li><p class="s1" style="padding-left: 64pt;text-indent: -15pt;line-height: 27pt;text-align: left;">这里的myFunc是我自己命名的，你可以根据需要命名它对应的名字</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 51pt;text-indent: 0pt;text-align: left;"><span><img width="338" height="74" alt="image" src="index_files/Image_036.jpg"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ul></li><li><p class="s1" style="padding-left: 33pt;text-indent: -15pt;line-height: 27pt;text-align: left;">另外，<b>需要注意</b>：</p><p style="text-indent: 0pt;text-align: left;"><span><img width="1119" height="6" alt="image" src="index_files/Image_037.png"/></span></p><ul id="l15"><li><p class="s1" style="padding-left: 64pt;text-indent: -15pt;line-height: 27pt;text-align: left;">export default在同一个模块中，不允许同时存在多个。</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="1119" height="7" alt="image" src="index_files/Image_038.png"/></span></p><p style="text-indent: 0pt;text-align: left;"/><p class="s3" style="padding-left: 13pt;text-indent: 0pt;line-height: 55pt;text-align: left;"><span><img width="141" height="50" alt="image" src="index_files/Image_039.jpg"/></span>        <span class="h2">import使用</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p></li></ul></li><li><p class="s1" style="padding-top: 1pt;padding-left: 33pt;text-indent: -15pt;text-align: left;">我们使用<b>export</b>指令导出了模块对外提供的接口，下面我们就可以通过<b>import</b>命令来加载对应的这个模块了</p></li><li><p class="s1" style="padding-top: 2pt;padding-bottom: 2pt;padding-left: 33pt;text-indent: -15pt;text-align: left;">首先，我们需要在HTML代码中<b>引入两个js文件</b>，并且类型需要设置为<b>module</b></p><p style="padding-left: 37pt;text-indent: 0pt;text-align: left;"><span><img width="503" height="61" alt="image" src="index_files/Image_040.jpg"/></span></p></li><li><p class="s1" style="padding-top: 14pt;padding-bottom: 2pt;padding-left: 33pt;text-indent: -15pt;text-align: left;">import指令用于导入模块中的内容，比如main.js的代码</p><p style="padding-left: 34pt;text-indent: 0pt;text-align: left;"><span><img width="433" height="68" alt="image" src="index_files/Image_041.jpg"/></span></p></li><li><p class="s1" style="padding-top: 9pt;padding-left: 33pt;text-indent: -15pt;line-height: 27pt;text-align: left;">如果我们希望某个模块中所有的信息都导入，一个个导入显然有些麻烦：</p><ul id="l16"><li><p class="s1" style="padding-left: 64pt;text-indent: -15pt;line-height: 26pt;text-align: left;">通过*可以导入模块中所有的export变量</p><p style="text-indent: 0pt;text-align: left;"><span><img width="1119" height="6" alt="image" src="index_files/Image_042.png"/></span></p></li><li><p class="s1" style="padding-bottom: 1pt;padding-left: 64pt;text-indent: -15pt;line-height: 27pt;text-align: left;">但是通常情况下我们需要给*起一个别名，方便后续的使用</p></li></ul></li></ul><p style="padding-left: 34pt;text-indent: 0pt;text-align: left;"><span><img width="528" height="62" alt="image" src="index_files/Image_043.jpg"/></span></p></body></html>
